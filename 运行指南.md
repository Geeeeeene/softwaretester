# 🚀 HomemadeTester 运行指南

## 方式一：本地开发环境（推荐用于开发调试）

### 📋 前提条件
- ✅ Python 3.10+ （已安装）
- ✅ Node.js 18+ （已安装）
- ✅ 前端依赖已安装（已完成 `npm install`）

### 🔧 步骤 1：设置后端环境

#### 1.1 进入后端目录
```powershell
cd backend
```

#### 1.2 创建并激活虚拟环境
```powershell
# 如果还没有虚拟环境，创建它
python -m venv venv

# 激活虚拟环境
.\venv\Scripts\activate
```

#### 1.3 安装后端依赖
```powershell
pip install -r requirements.txt
```

**或者使用项目提供的设置脚本：**
```powershell
.\setup.bat
```

#### 1.4 初始化数据库（可选，首次运行会自动创建）
```powershell
python scripts\init_db.py
```

#### 1.5 启动后端服务
```powershell
# 方式1：使用启动脚本
.\start.bat

# 方式2：手动启动
uvicorn app.main:app --reload --port 8000
```

**后端服务将在 http://localhost:8000 运行**
- API文档：http://localhost:8000/docs
- 健康检查：http://localhost:8000/health

---

### 🎨 步骤 2：启动前端服务

#### 2.1 进入前端目录（新开一个终端窗口）
```powershell
cd frontend
```

#### 2.2 启动开发服务器
```powershell
npm run dev
```

**前端服务将在 http://localhost:5173 运行**

---

### ✅ 验证运行状态

1. **检查后端**：访问 http://localhost:8000/health
   - 应该返回：`{"status":"healthy",...}`

2. **检查前端**：访问 http://localhost:5173
   - 应该看到项目主页

3. **检查API文档**：访问 http://localhost:8000/docs
   - 应该看到 Swagger API 文档

---

## 方式二：Docker Compose（推荐用于快速体验）

### 📋 前提条件
- Docker Desktop 已安装并运行

### 🚀 启动步骤

#### 方法1：使用启动脚本（Windows）
```powershell
.\start.ps1
```

#### 方法2：手动启动
```powershell
docker compose up -d
```

### 📊 查看服务状态
```powershell
docker compose ps
```

### 📝 查看日志
```powershell
# 查看所有服务日志
docker compose logs -f

# 查看特定服务日志
docker compose logs -f backend
docker compose logs -f frontend
```

### 🛑 停止服务
```powershell
docker compose down
```

### 🌐 访问地址
- 前端: http://localhost:5173
- API文档: http://localhost:8000/docs
- Neo4j浏览器: http://localhost:7474

---

## 🔍 常见问题排查

### Q1: 后端启动失败
**检查：**
- Python 版本是否为 3.10+
- 虚拟环境是否已激活
- 依赖是否已安装：`pip list`
- 端口 8000 是否被占用：`netstat -ano | findstr "8000"`

### Q2: 前端启动失败
**检查：**
- Node.js 版本是否为 18+
- 依赖是否已安装：`npm list`
- 端口 5173 是否被占用：`netstat -ano | findstr "5173"`

### Q3: 前端无法连接后端
**检查：**
1. 后端是否正在运行（访问 http://localhost:8000/health）
2. 检查 `frontend/.env` 文件中的 `VITE_API_BASE_URL` 配置
3. 检查浏览器控制台的错误信息

### Q4: 数据库连接错误
**SQLite（默认）：**
- 确保 `backend` 目录有写入权限
- 数据库文件会自动创建在 `backend/homemade_tester.db`

**PostgreSQL：**
- 确保 PostgreSQL 服务正在运行
- 检查 `backend/.env` 中的 `DATABASE_URL` 配置

---

## 📝 快速命令参考

### 后端
```powershell
# 进入后端目录
cd backend

# 激活虚拟环境
.\venv\Scripts\activate

# 启动服务
uvicorn app.main:app --reload --port 8000

# 初始化数据库
python scripts\init_db.py
```

### 前端
```powershell
# 进入前端目录
cd frontend

# 启动开发服务器
npm run dev

# 构建生产版本
npm run build

# 预览生产版本
npm run preview
```

### Docker
```powershell
# 启动所有服务
docker compose up -d

# 停止所有服务
docker compose down

# 查看日志
docker compose logs -f

# 重启服务
docker compose restart
```

---

## 🎯 下一步

运行成功后，您可以：

1. 📖 浏览 API 文档：http://localhost:8000/docs
2. 🧪 创建第一个测试项目
3. 📝 编写测试用例
4. ▶️ 运行测试并查看结果

祝使用愉快！🚀

